<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.empty.dao.BaseUserMapper">
    <select id="selectUserById" parameterType="int"
            resultType="userEntity">
		select
		*
		from
		user
		where
		user_id = #{userId}
	</select>

    <select id="findUserByName" parameterType="string"
            resultType="userEntity">
		select
		*
		from
		user
		where
		user_name like
		#{userName}
	</select>

    <select id="findUserByEmail" parameterType="string"
            resultType="userEntity">
		select
		*
		from
		user
		where
		user_email like
		#{userEmail}
	</select>

    <insert id="saveNewUser" parameterType="userEntity">
        insert into user
        (
        <if test="userPerm != null and userPerm != ''">user_perm,</if>
        <if test="userIcon != null and userIcon != ''">user_icon,</if>
        user_name,
        user_password,
        user_email
        )
        values
        (
        <if test="userPerm != null and userPerm != ''">#{userPerm},</if>
        <if test="userIcon != null and userIcon != ''">#{userIcon},</if>
        #{userName},
        #{userPassword},
        #{userEmail}
        )
    </insert>

    <delete id="deleteUserById" parameterType="int">
		delete from
		user
		where
		user_id = #{userId}
	</delete>

    <update id="updateUser" parameterType="userEntity">
        update user
        <set>
            <if test="userName != null and userName != ''">user_name = #{userName},</if>
            <if test="userPassword != null and userPassword != ''">user_password = #{userPassword},</if>
            <if test="userEmail != null and userEmail != ''">user_email = #{userEmail},</if>
            <if test="userPerm != null and userPerm != ''">user_perm = #{userPerm},</if>
            <if test="userIcon != null and userIcon != ''">user_icon = #{userIcon},</if>
            <if test="userBanner != null and userBanner != ''">user_banner = #{userBanner},</if>
            <if test="userDesc != null and userDesc != ''">user_desc = #{userDesc},</if>
            <if test="userLoc != null and userLoc != ''">user_loc = #{userLoc},</if>
            <if test="userSite != null and userSite != ''">user_site = #{userSite},</if>
            <if test="userLevel != null">user_level = #{userLevel},</if>
            <if test="userAchi != null and userAchi != ''">user_achi = #{userAchi}</if>
        </set>
        where
        user_id = #{userId}
    </update>
</mapper>